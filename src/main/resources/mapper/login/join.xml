<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.scyllacore.dumpWeb.commonModule.db.mapper.login.JoinMapper">

    <insert id="insertUserInfo" parameterType="Login">
        INSERT INTO tsitepw(userId
        , userPW
        , userTel
        , userName
        , joinDate
        , userPosition
        <if test="userPosition == 'manager'.toString()">, userSS </if>)
        VALUES(#{userId}
        , SHA2(#{userPw}, 256)
        , #{userTel}
        , #{userName}
        , NOW()
        , #{userPosition}
        <if test="userPosition == 'manager'.toString()">, #{userSS} </if>)
    </insert>

    <!--  ID 체크  -->
    <select id="selectUserIdForDuplicateCheck" parameterType="Login" resultType="Login">
        SELECT userId
        FROM tsitepw
        WHERE userId = #{userId}
    </select>

</mapper>


